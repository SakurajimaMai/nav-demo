<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>我的导航栏</title>
  <link rel="stylesheet" href="./style.css">
</head>

<body>
  <main>
    <div id="mainxxx"></div>
  </main>
  <footer></footer>
  <script>
    keys = {
      0: { 0: 'q', 1: 'w', 2: 'e', 3: 'r', 4: 't', 5: 'y', 6: 'u', 7: 'i', 8: 'o', 9: 'p', length: 10 },
      1: { 0: 'a', 1: 's', 2: 'd', 3: 'f', 4: 'g', 5: 'h', 6: 'j', 7: 'k', 8: 'l', length: 9 },
      2: { 0: 'z', 1: 'x', 2: 'c', 3: 'v', 4: 'b', 5: 'n', 6: 'm', length: 7 },
      length: 3
    }
    hash = {
      q: 'qq.com', w: 'weibo.com', e: 'ele.me', r: 'renren.com', t: 'twitter.com', y: 'youtube.com', u: 'uc.com', i: 'iqiyi.om', o: 'opera.com', p: undefined,
    }
    //取出localStorage中的zzz对应的hash
    hashInLocalStorage = JSON.parse(localStorage.getItem('zzz'))
    if(hashInLocalStorage){
      hash = hashInLocalStorage
    }
    // 遍历keys，生成kbd标签
    index = 0
    while (index < keys['length']) {
      divxxx = document.createElement('div')//创建一个标签
      mainxxx.appendChild(divxxx)//生成一个儿子
      row = keys[index]
      console.log(row)//打印row
      index2 = 0
      while (index2 < row['length']) {
        kbdxxx = document.createElement('kbd')
        kbdxxx.textContent = row[index2]//插入文字
        divxxx.appendChild(kbdxxx)
        //用户可以点击编辑改变网址
        buttonxxx = document.createElement('button')
        buttonxxx.textContent = '编辑'
        kbdxxx.appendChild(buttonxxx)
        buttonxxx.id = row[index2]//给每个button加个ID
        buttonxxx.onclick =function(mai){
          key = mai['target']['id']
          x = prompt('给我一个网址')//按了编辑以后会跳出一个对话框让用户填网址。
          hash[key] = x
          localStorage.setItem('zzz',JSON.stringify(hash))//把新网址存到浏览器localStorage里面
        }
        index2 = index2 + 1
      }
      index = index + 1
    }
    document.onkeypress = function (sakurajimamai) {
      key = sakurajimamai['key']
      website = hash[key]
      // location.href = 'http://' + website
      window.open('http://' + website, '_blank')
    }
  </script>
</body>

</html>